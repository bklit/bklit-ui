{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "x-axis",
  "type": "registry:component",
  "title": "X Axis",
  "description": "X-axis component for time-series charts",
  "registryDependencies": [
    "https://ui.bklit.com/r/chart-context.json",
    "https://ui.bklit.com/r/utils.json"
  ],
  "files": [
    {
      "path": "src/charts/x-axis.tsx",
      "content": "\"use client\";\n\nimport { motion } from \"motion/react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { cn } from \"../lib/utils\";\nimport { useChart } from \"./chart-context\";\n\nexport interface XAxisProps {\n  /** Number of ticks to show (including first and last). Default: 5 */\n  numTicks?: number;\n  /** Width of the date ticker box for fade calculation. Default: 50 */\n  tickerHalfWidth?: number;\n}\n\ninterface XAxisLabelProps {\n  label: string;\n  x: number;\n  crosshairX: number | null;\n  isHovering: boolean;\n  tickerHalfWidth: number;\n}\n\nfunction XAxisLabel({\n  label,\n  x,\n  crosshairX,\n  isHovering,\n  tickerHalfWidth,\n}: XAxisLabelProps) {\n  const fadeBuffer = 20;\n  const fadeRadius = tickerHalfWidth + fadeBuffer;\n\n  let opacity = 1;\n  if (isHovering && crosshairX !== null) {\n    const distance = Math.abs(x - crosshairX);\n    if (distance < tickerHalfWidth) {\n      opacity = 0;\n    } else if (distance < fadeRadius) {\n      opacity = (distance - tickerHalfWidth) / fadeBuffer;\n    }\n  }\n\n  // Zero-width container approach for perfect centering\n  // The wrapper is positioned exactly at x with width:0\n  // The inner span overflows and is centered via text-align\n  return (\n    <div\n      className=\"absolute\"\n      style={{\n        left: x,\n        bottom: 12,\n        width: 0,\n        display: \"flex\",\n        justifyContent: \"center\",\n      }}\n    >\n      <motion.span\n        animate={{ opacity }}\n        className={cn(\"whitespace-nowrap text-chart-label text-xs\")}\n        initial={{ opacity: 1 }}\n        transition={{ duration: 0.4, ease: \"easeInOut\" }}\n      >\n        {label}\n      </motion.span>\n    </div>\n  );\n}\n\nexport function XAxis({ numTicks = 5, tickerHalfWidth = 50 }: XAxisProps) {\n  const { xScale, margin, tooltipData, containerRef } = useChart();\n  const [mounted, setMounted] = useState(false);\n\n  // Only render on client side after mount\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Generate evenly spaced tick values, always including first and last dates\n  const labelsToShow = useMemo(() => {\n    const domain = xScale.domain();\n    const startDate = domain[0];\n    const endDate = domain[1];\n\n    if (!(startDate && endDate)) {\n      return [];\n    }\n\n    const startTime = startDate.getTime();\n    const endTime = endDate.getTime();\n    const timeRange = endTime - startTime;\n\n    // Create evenly spaced dates from start to end\n    const tickCount = Math.max(2, numTicks); // At least first and last\n    const dates: Date[] = [];\n\n    for (let i = 0; i < tickCount; i++) {\n      const t = i / (tickCount - 1); // 0 to 1\n      const time = startTime + t * timeRange;\n      dates.push(new Date(time));\n    }\n\n    return dates.map((date) => ({\n      date,\n      x: (xScale(date) ?? 0) + margin.left,\n      label: date.toLocaleDateString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n      }),\n    }));\n  }, [xScale, margin.left, numTicks]);\n\n  const isHovering = tooltipData !== null;\n  const crosshairX = tooltipData ? tooltipData.x + margin.left : null;\n\n  // Use portal to render into the chart container\n  // Only render after mount on client side\n  const container = containerRef.current;\n  if (!(mounted && container)) {\n    return null;\n  }\n\n  // Dynamic import to avoid SSR issues\n  const { createPortal } = require(\"react-dom\") as typeof import(\"react-dom\");\n\n  return createPortal(\n    <div className=\"pointer-events-none absolute inset-0\">\n      {labelsToShow.map((item) => (\n        <XAxisLabel\n          crosshairX={crosshairX}\n          isHovering={isHovering}\n          key={`${item.label}-${item.x}`}\n          label={item.label}\n          tickerHalfWidth={tickerHalfWidth}\n          x={item.x}\n        />\n      ))}\n    </div>,\n    container\n  );\n}\n\nXAxis.displayName = \"XAxis\";\n\nexport default XAxis;\n",
      "type": "registry:component",
      "target": "components/charts/x-axis.tsx"
    }
  ]
}